'use strict';

define([
	'backbone',
	'collections/devices',
	'collections/departments',
	'views/launchPage',
	'views/scanPage',
	'views/lookUpPage',
	'views/browsePage'
], function( Backbone ) {
	app.Router.Router = Backbone.Router.extend( {

		routes: {
			''					: 'default',
			'launch'			: 'launchApp',
			'scan'				: 'launchScan',
			'lookUp'			: 'launchLookUp',
			'browse'			: 'launchBrowse',
			'list/devices'		: 'listDevices',
			'list/departments'	: 'listDepartments'
		},

		initialize: function() {
			app.Views.launchPage = app.Views.launchPage || new app.Views.LaunchPage();
			app.Views.scanPage = app.Views.scanPage || new app.Views.ScanPage();
			app.Views.lookUpPage = app.Views.lookUpPage || new app.Views.LookUpPage();
			app.Views.browsePage = app.Views.browsePage || new app.Views.BrowsePage();
			app.Views.listPage = app.Views.listPage || new app.Views.ListPage();
		},

		default: function() {
			this.navigate( 'launch', { trigger: true });
		},

		launchApp: function() {
			app.Views.launchPage.render();
		},

		launchScan: function() {
			app.Views.scanPage.render();
		},

		launchLookUp: function() {
			app.Views.lookUpPage.render();
		},

		launchBrowse: function() {
			app.Views.browsePage.render();
		},

		listDevices: function() {
			app.Views.listPage.collection = app.Collections.devices;
			app.Views.listPage.render();
		},

		listDepartments: function() {
			app.Views.listPage.collection = app.Collections.departments;
			app.Views.listPage.render();
		},

		initializeStorage: function() {
			if (Modernizr.localstorage) {

			} else {

			}
			app.Collections.devices = new app.Collections.Devices([	{ id: 1, name: 'iPhone 4', manufacturer: 'Apple' },
																	{ id: 2, name: 'iPad 2', manufacturer: 'Apple' },
																	{ id: 3, name: 'Galaxy Nexus', manufacturer: 'Samsung' } ]);

			app.Collections.departments = new app.Collections.Departments([	{ id: 1, name: 'Research' },
																			{ id: 2, name: 'ITD' },
																			{ id: 3, name: 'Community Outreach' } ]);
		}
	});
});